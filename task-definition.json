{
  "family": "myaigist-task",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "1024",
  "memory": "2048",
  "executionRoleArn": "arn:aws:iam::039357025951:role/ecsTaskExecutionRole",
  "taskRoleArn": "arn:aws:iam::039357025951:role/ecsTaskRole",
  "containerDefinitions": [
  {
  "name": "myaigist",
  "image": "039357025951.dkr.ecr.us-east-1.amazonaws.com/myaigist:latest",
  "portMappings": [
  {
  "containerPort": 8000,
  "protocol": "tcp"
  }
  ],
  "essential": true,
  "logConfiguration": {
  "logDriver": "awslogs",
  "options": {
  "awslogs-group": "/ecs/myaigist",
  "awslogs-region": "us-east-1",
  "awslogs-stream-prefix": "ecs"
  }
  },
  "environment": [
  {
  "name": "FLASK_ENV",
  "value": "production"
  },
  {
  "name": "OPENAI_EMBED_MODEL",
  "value": "text-embedding-3-small"
  },
  {
  "name": "OPENAI_TTS_MODEL",
  "value": "tts-1"
  },
  {
  "name": "OPENAI_WHISPER_MODEL",
  "value": "whisper-1"
  }
  ],
  "secrets": [
  {
  "name": "OPENAI_API_KEY",
  "valueFrom": "arn:aws:ssm:us-east-1:039357025951:parameter/myaigist/openai-api-key"
  },
  {
  "name": "OPENAI_MODEL",
  "valueFrom": "arn:aws:ssm:us-east-1:039357025951:parameter/myaigist/openai-model"
  },
  {
  "name": "GA_MEASUREMENT_ID",
  "valueFrom": "arn:aws:ssm:us-east-1:039357025951:parameter/myaigist/ga-measurement-id"
  }
  ],
  "mountPoints": [
  {
  "sourceVolume": "efs-volume",
  "containerPath": "/app/data"
  },
  {
  "sourceVolume": "efs-volume",
  "containerPath": "/app/static/audio"
  }
  ]
  }
  ],
  "volumes": [
  {
  "name": "efs-volume",
  "efsVolumeConfiguration": {
  "fileSystemId": "fs-0cd336ba0439e9836",
  "rootDirectory": "/",
  "transitEncryption": "ENABLED"
  }
  }
  ]
  }